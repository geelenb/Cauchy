<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="complex.min.js"></script>
    <script src="math.min.js"></script>
</head>
<body>

<textarea id="zeros" placeholder="Zeros,
One per line" onchange="update_function()">-1</textarea>
<textarea id="poles" placeholder="Poles,
One per line" onchange="update_function()">-2-2j
-2+2j</textarea>
<input id="K" placeholder="K" onchange="update_function()" value="1"/>

<div id="input_graph"></div>
<div id='coors'></div>
<div id="output_graph"></div>

<script>

    let zeros = [], poles = [], K = 1;
    let f = (s) => Complex(0, 0);

    const input_graph = document.getElementById('input_graph');
    const output_graph = document.getElementById('output_graph');

    Plotly.plot('input_graph', [{
        y: [0, 2, 1, 3],
    }], {
        xaxis: {range: [-9, 1]},
        yaxis: {range: [-5, 5]},
    });

    const fl = input_graph._fullLayout;

    const coor_of_event = event => Complex(
        fl.xaxis.p2c(event.x - fl.margin.l),
        fl.yaxis.p2c(event.y - fl.margin.t)
    );

    input_graph.addEventListener('mousemove', evt => {
        console.log(coor_of_event(evt))
    });

    function update_function() {
        zeros = document.getElementById('zeros').innerHTML.split('\n').map(x=>x.trim()).map(Complex);
        poles = document.getElementById('poles').innerHTML.split('\n').map(x=>x.trim()).map(Complex);
        K = Number(document.getElementById('K').value);

        f = (s) => {
            const counter = K * zeros.map(z => s - z).reduce((a, b) => a.mul(b), Complex.ONE);
            const denominator = poles.map(z => s - z).reduce((a, b) => a.mul(b), Complex.ONE);
            return counter / denominator;
        };
        debugger;
    }

    update_function();

</script>
</body>
</html>